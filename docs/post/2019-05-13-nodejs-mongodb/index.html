<!DOCTYPE html>
 <html class="ie" lang="es"> 
  <head>
    <meta charset="utf-8">
      <meta name="generator" content="Hugo 0.55.6" />

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png?v=1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png?v=1">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png?v=1">
    <link rel="manifest" href="/favicon/site.webmanifest?v=1">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg?v=1" color="#ffffff">
    <link rel="shortcut icon" href="/favicon/favicon.ico?v=1">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml?v=1">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://hugorocaproyectos.js.org/index.xml">

    
    <title>Conexión NodeJS con MongoDB Atlas - Hugo Roca Proyectos</title>
    <meta property='og:title' content="Conexión NodeJS con MongoDB Atlas - Hugo Roca Proyectos">
    <meta property="og:type" content="article">
    

    <meta property="og:url" content="https://hugorocaproyectos.js.org/post/2019-05-13-nodejs-mongodb/">
    <meta name="description" content="MongoDB Atlas es la base de datos como servicio que permite implementar, utilizar y escalar una base de datos de MongoDB en la nube haciendo conexión con NodeJS.">
    <meta property="og:image" content="https://hugorocaproyectos.js.org/images/shared/nodejs-mongodb.jpg">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Work+Sans:400,500,700,800" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" integrity="sha256-0rguYS0qgS6L4qVzANq4kjxPLtvnp5nn2nB5G1lWRv4=" crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css" rel="stylesheet" integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" integrity="sha256-sNPiigbfSkqUzMc5rgrdztLnneCMAp6W9wetJUZu9Zw=" crossorigin="anonymous"></script>

    <link
      href='https://hugorocaproyectos.js.org//css/runnable.css?4024e2c313cea9abd4cad188f612e25c'
      rel="stylesheet"
    />
    <link
      href='https://hugorocaproyectos.js.org//css/runnable-custom.css?e3a7bf45ca185c40211474063f0e86d0'
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />

    
    
    

    <link
      rel="stylesheet"
      href='https://hugorocaproyectos.js.org/css/styles.css?12646ef6287134bfdae61a4df0e734a1'>
    <link
      rel="stylesheet"
      href='https://hugorocaproyectos.js.org/css/custom.css?140cf12e7b6472e3ea75043208c17556'>

    
    
      
        <meta name="twitter:card" content="summary_large_image"/>
        <meta name="twitter:image" content="https://hugorocaproyectos.js.org/images/shared/nodejs-mongodb.jpg"/>
      
    

    <meta name="twitter:title" content="Conexión NodeJS con MongoDB Atlas"/>
    <meta name="twitter:description" content="MongoDB Atlas es la base de datos como servicio que permite implementar, utilizar y escalar una base de datos de MongoDB en la nube haciendo conexión con NodeJS.
Usaremos clases y funcion asincronas con promesas en javascript ES6.
Creando el Package.json Antes de proceder con cualquier instalación de paquetes npm necesitamos crear nuestro package.json.
 Como primer paso creamos una carpeta donde estarán todos nuestros archivos. Luego, levantar la ventana de comandos dentro de la carpeta y ejecutar el siguiente comando npm init."/>
    <meta name="twitter:site" content="@https://twitter.com/huugooroca"/>
  </head>


<body class="blog-article" data-gr-c-s-loaded="true">

  
  <header id="page-header" class="page-header">
  <div class="container">
    <div class="row">
      <div class="col-12 offset-0 col-md-10 offset-md-1">
        <figure class="page-logo"><a href="/"><img src="/images/logo_1.png" alt="Hugo Logo"></a></figure>
        <a href="https://t.me/hugoroca" title="linkedin" class="button button-dgraph-site button--outline pull-right">
            <i class="fa fa-telegram" aria-hidden="true"></i>
          </a>
        <a href="https://github.com/HugoRoca" title="github" class="button button-dgraph-site button--outline pull-right">
          <i class="fa fa-github" aria-hidden="true"></i>
        </a>
        <a href="https://twitter.com/huugooroca" title="twitter" class="button button-dgraph-site button--outline pull-right">
          <i class="fa fa-twitter" aria-hidden="true"></i>
        </a>
        <a href="https://www.linkedin.com/in/hugoroca/" title="linkedin" class="button button-dgraph-site button--outline pull-right">
          <i class="fa fa-linkedin" aria-hidden="true"></i>
        </a>
      </div>
    </div>
  </div>
</header>
  
  <section class="page-intro page-intro--blog-article">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 offset-xs-0 col-md-10 offset-md-1">
          <header class="page-intro__header">
            <div class="article__meta">
              <span class="article__meta-item article__date">
                
                  13/05/13056
                 by
                

 Hugo Roca


              </span>
              <div class="share">
                <div class="sharethis-inline-share-buttons"></div>
                
              </div>
            </div>
            <h1 class="page-intro__title page-intro__title--blog">Conexión NodeJS con MongoDB Atlas</h1>
          </header>
        </div>
      </div>
    </div>
  </section>
  
  <div class="page-content">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 offset-xs-0 col-md-10 offset-md-1">
          <img
            class="main__image"
            src="https://hugorocaproyectos.js.org/images/shared/nodejs-mongodb.jpg"
          >
          <div class="article-content">

<p>MongoDB Atlas es la base de datos como servicio que permite implementar, utilizar y escalar una base de datos de MongoDB en la nube haciendo conexión con NodeJS.</p>

<p>Usaremos clases y funcion asincronas con promesas en javascript ES6.</p>

<h3 id="creando-el-package-json">Creando el Package.json</h3>

<p>Antes de proceder con cualquier instalación de paquetes npm necesitamos crear nuestro package.json.</p>

<ul>
<li>Como primer paso creamos una carpeta donde estarán todos nuestros archivos.</li>
<li>Luego, levantar la ventana de comandos dentro de la carpeta y ejecutar el siguiente comando <code>npm init</code>.</li>
<li>Podemos personalizar o simplemente precionar la tecla enter hasta terminar.</li>
</ul>

<p>Al finalizar tendremos un archivo como este:</p>

<pre><code>{
  &quot;name&quot;: &quot;[nombre]&quot;,
  &quot;version&quot;: &quot;[versión]&quot;,
  &quot;description&quot;: &quot;[descripción]&quot;,
  &quot;main&quot;: &quot;&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;Hugo Roca - hugo.rock20@hotmail.com&quot;,
  &quot;license&quot;: &quot;[licencia]&quot;
}
</code></pre>

<h3 id="instalando-npm-mongodb">Instalando npm mongodb</h3>

<p>Para este caso utilizaremos al paquete mongodb (<a href="https://www.npmjs.com/package/mongodb">https://www.npmjs.com/package/mongodb</a>), en la consola de comandos copiamos y pegamos lo siquiente: <code>npm i mongodb</code>, una ves terminado se creará una carpeta por defecto <code>node_modules</code>, en donde se guardan todas las dependencias.</p>

<h2 id="creando-colección">Creando colección</h2>

<p>Podemos crear la colección tanto por una GUI para mongo como por código. Dejare un ejemplo de como crearlo por código.</p>

<pre><code class="language-js">let MongoClient = require('mongodb').MongoClient;
let url = &quot;mongodb://localhost:27017/&quot;; // =&gt; url de conexión mongo

MongoClient.connect(url, function(err, db) {
  if (err) throw err;
  let dbo = db.db(&quot;mydb&quot;);
  dbo.createCollection(&quot;customers&quot;, function(err, res) {
    if (err) throw err;
    console.log(&quot;Collection created!&quot;);
    db.close();
  });
});
/* esto es un ejemplo básico */
</code></pre>

<h2 id="creando-el-proyecto">Creando el proyecto</h2>

<p>Empezaremos creando un archivo <code>config.js</code>, en donde se alojaran las configuraciones, conexiones, etc.</p>

<pre><code class="language-js">const config = {
    mongo: {
        url: &quot;mongodb://localhost:27017/&quot;, // =&gt; url de conexión mongo
        database: &quot;test&quot;,
        collection: &quot;nodejs_mongo_atlas&quot;
    }
}

module.exports = config;

</code></pre>

<p>Creamos otro archivo y lo nombraremos <code>mongoUtils.js</code>, este archivo tendrá funciones de configuración.</p>

<pre><code class="language-js">const mongoClient = require(&quot;mongodb&quot;).MongoClient;
const config = require(&quot;./config&quot;);

module.exports = class MongoUtils {
    getConnectionString() {
        return config.mongo.url;
    }

    getDataBaseString() {
        return config.mongo.database;
    }

    getCollectionString() {
        return config.mongo.collection;
    }

    buildCollection(message) {
        return {
            message,
            createdAt: new Date()
        }
    }

    async insertData(data) {
        return new Promise((resolve, reject) =&gt; {
            mongoClient.connect(this.getConnectionString(), { useNewUrlParser: true }).then(client =&gt; {

                const db = client.db(this.getDataBaseString());
                const collection = db.collection(this.getCollectionString());

                collection.insertOne(data, (insertError, insertResponse) =&gt; {
                    if (insertError) reject(insertError);
                    resolve(insertResponse);
                });

            }).catch(err =&gt; {
                console.error(&quot;Error al conectarse con la base de datos: &quot;, err);
            });
        });
    }

    async insert(message){
        let data = this.buildCollection(message);
        return await this.insertData(data);
    }

}

</code></pre>

<p>Para finalizar, creamos un archivo <code>index.js</code> en donde haremos el llamado a la funciones creadas en <code>mongoUtils.js</code>.</p>

<pre><code class="language-js">const mongoUtils = require(&quot;./mongoUtils&quot;);
const mongo = new mongoUtils();

(async() =&gt; {
    let insert = await mongo.insert(&quot;Ejecutando mongo desde nodeJS&quot;);
    console.log(insert);
})();


</code></pre>

<p>Para ejecutar, solamente basta ejecutar el siguiente comando en la consola <code>node index.js</code></p>

<p><img src="/images/nodejs-mongodb-atlas/resultado.jpg" alt="Sin titulo" /></p>

<blockquote>
<p>Para obtener el código completo dar click <a href="https://github.com/PORTAFOLIO-PROYECTOS/NODEJS_MONGODB/archive/master.zip">aquí</a></p>

<h4 id="comenta-disfruta-y-comparte">Comenta, disfruta y comparte!</h4>
</blockquote>
</div>
          <div class="article-tag-list">
            
            
                
                
                    <a href="https://hugorocaproyectos.js.org/tags/javascript/">JavaScript</a>
                
            
                
                
                    <a href="https://hugorocaproyectos.js.org/tags/js/">JS</a>
                
            
                
                
                    <a href="https://hugorocaproyectos.js.org/tags/mongodb/">mongodb</a>
                
            
                
                
                    <a href="https://hugorocaproyectos.js.org/tags/base-de-datos/">base de datos</a>
                
            
          </div>
          <div class="modal fade" id="runnable-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <a href="#" data-dismiss="modal" class="modal-close-btn">
    Close
  </a>

  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">

      </div>
    </div>
  </div>
</div>
        </div>
      </div>
    </div>

    <footer class="article-footer">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div class="article-author">
  <figure class="article-author__figure">
    


	<img src="/images/profile.jpg" class="article-author__image">


  </figure>
  <div class="article-author__bio">
    <h4 class="article-author__name">

 Hugo Roca


      <span class="article-author__title">Autor</span>
    </h4>
    


<nav class="social__nav article-author__social">
    <ul class="social__list social__list--inline">
        <li class="social__item social__item--inline">
            <a href="https://www.linkedin.com/in/hugoroca/" class="social__link">
                <i class="icon social__icon social__icon--linkedin fa fa-linkedin" aria-hidden="true"></i>
                
            </a>
        </li>
        <li class="social__item social__item--inline">
            <a href="https://twitter.com/huugooroca" class="social__link">
                <i class="icon social__icon fa fa-twitter" aria-hidden="true"></i>
            </a>
        </li>
        <li class="social__item social__item--inline">
            <a href="https://github.com/HugoRoca" class="social__link">
                <i class="icon social__icon fa fa-github" aria-hidden="true"></i>
            </a>
        </li>
        <li class="social__item social__item--inline">
            <a href="https://t.me/hugoroca" class="social__link">
                <i class="icon social__icon fa fa-telegram" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</nav>
<p> Soy Hugo Roca, un analista de software que trabaja en Lima - Perú. Claro y simple, me encanta la programación. Me
    apasiona escribir código limpio, único y elegante. Códigos que funcionan.</p>

  </div>
</div>

            
          </div>
          <div class="col-12">
            
<div id="disqus_thread"></div>
<script>


var disqus_config = function () {
this.page.url = "https:\/\/hugorocaproyectos.js.org\/post\/2019-05-13-nodejs-mongodb\/";  
this.page.identifier = "https:\/\/hugorocaproyectos.js.org\/post\/2019-05-13-nodejs-mongodb\/"; 
};
(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://hugorocaproyectos.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


          </div>
        </div>
      </div>
    </footer>
  </div>

  


  <div class="page-footer__wrapper">
  <footer id="page-footer" class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col-12 col-md-3">
          <figure class="page-logo-footer"><a href="/">
            <img src="/images/logo_1.png"  alt="Company Logo"></a></figure>
        </div>
        <div class="col-4 col-md-2">
          <nav class="page-footer-nav">
            <h6 class="page-footer-nav__title"><a href="https://www.linkedin.com/in/hugoroca/">Linkedin</a></h6>
            
          </nav>
        </div>
        <div class="col-4 col-md-2">
          <nav class="page-footer-nav">
            <h6 class="page-footer-nav__title"><a href="https://twitter.com/huugooroca">Twitter</a></h6>
          </nav>
        </div>
        <div class="col-4 col-md-2">
          <nav class="page-footer-nav">
            <h6 class="page-footer-nav__title"><a href="https://github.com/HugoRoca">GitHub</a></h6>
          </nav>
        </div>
        <div class="col-4 col-md-2">
          <nav class="page-footer-nav">
            <h6 class="page-footer-nav__title"><a href="https://t.me/hugoroca">Telegram</a></h6>
          </nav>
        </div>
      </div>
      <div class="row">
        <span class="imprint__copyrights">&copy; 2019 Hugo Roca Proyectos</span>
      </div>
    </div>

    
  </footer>
  
</div>

    <script src="https://hugorocaproyectos.js.org//js/clipboard.min.js"></script>
    <script
      src='https://hugorocaproyectos.js.org//js/runnable.js?e96637008f750166c2e2dcc8f83bbee1'
    ></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>



<script>
if (window.location.host.indexOf("dgraph.io") > -1) {
  (function(i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    (i[r] =
      i[r] ||
      function() {
        (i[r].q = i[r].q || []).push(arguments);
      }), (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "//www.google-analytics.com/analytics.js",
    "ga"
  );
  ga("create", "UA-125594168-1", "auto");
  ga("send", "pageview");
}
</script>







<link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
<script src="//platform-api.sharethis.com/js/sharethis.js#property=5c19d3a913338200118dbadd&product=sticky-share-buttons"></script>
</body>
</html>

  

  
</html>
